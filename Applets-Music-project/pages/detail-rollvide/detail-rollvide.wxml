<!--pages/detail-rollvide/detail-rollvide.wxml-->
<wxs src="/utils/format.wxs" module="fmt"></wxs>
<!-- 1.背景展示 -->


<!-- 2.自定义导航栏 -->
<view class="navCon">
    <nav-bar bind:leftclick="onNavBackTap">
        <view class="tabs" slot="left">
            <text class="iconfont icon-fanhui"></text>
        </view>
        <view class="tabs" slot="center">
            
        </view>
    </nav-bar>
</view>


<swiper vertical
        class="swiper"
        bindchange="bindchangeSwiper"
        current="{{index}}"
>
    <block wx:for="{{mvlist}}" wx:key="id">
        <swiper-item>
            <view class="imageCon" bindtap="onImageClick">
                <video 
                    wx:if="{{(mvlist[current].id === item.id) && videoPlay.url}}"
                    src="{{(mvlist[current].id === item.id)? videoPlay.url : ''}}"
                    controls="{{false}}"
                    class="video"
                    id="video"
                    object-fit="fill"
                    loop
                    autoplay
                    data-time="{{item.duration}}"
                    bindplay="mvplay"
                    bindtimeupdate="setSliderTimeFn"
                    style="height: {{videoHeight}}px; margin-top: {{videoTop}}px;"
                />
                <image style="margin-top: {{videoTop}}px;" wx:if="{{imageShow || (mvlist[current].id !== item.id)}}" id="image{{index}}" class="image" src="{{item.cover}}" mode="aspectFit"></image>
                <view class="MvleftInfo" wx:if="{{(mvInfo.artists[0].img1v1Url || mvInfo.artists[0].name) && sliderb}}">
                    <view class="mvLeftTop">
                        <view class="imageItemCon">
                            <image class="mvimage" src="{{mvInfo.artists[0].img1v1Url}}" mode="aspectFill"/>
                        </view>
                        <text class="artistName">{{mvInfo.artists[0].name}}</text>
                        <text class="iconfont icon-jiahao1"></text>
                    </view>
                    <view class="mvLeftBottom">
                        <view class="mvName">
                            <!-- <text class="mvIcon">MV</text> -->
                            <text>{{mvInfo.name}}</text>
                            <text wx:if="{{mvInfo.desc !== ''&& iconText}}" catchtap="onIconText" class="iconfont icon-zhankai"></text>
                        </view>
                        <view wx:if="{{!iconText && mvInfo.desc}}" class="mvDesc">
                            <scroll-view scroll-y="true" class="scrollViewCon" style="height: {{descHeight}}px;">
                                <view class="textDesc">
                                    <text>{{mvInfo.desc}}</text>
                                    <text bindtap="onIconTextContract" style="transform: rotate(180deg); display: inline-block;" class="iconfont icon-zhankai"></text>
                                </view>
                            </scroll-view>
                        </view>
                        <view class="releaseTime">
                            <text>{{mvInfo.publishTime}}</text>
                        </view>
                    </view>
                </view>
                <view class="nameRoll" wx:if="{{(mvInfo.name || mvInfo.artistName) && sliderb}}">
                    <text class="iconfont icon-icon-test"></text>
                    
                    <view class="rollText">
                        <view class="rollItem rollstart" style="height: {{RollHeight}}px;">
                        
                        </view>
                        <!-- <view style="animation-duration: {{speedtime}}ms; animation-name: {{roll}};" class="{{(rollLoopBom&&speedtime>0) ? 'rollName':''}}"> -->
                        <view style="animation-duration: {{speedtime}}ms; animation-name: {{animationName}}; animation-delay: 2000ms;" class="{{noeRoll ? 'rollName':''}}">

                        <view class="textCons">
                            <text class="rollNameText">{{mvInfo.name + ' - '}} {{mvInfo.artistName}}</text>
                            <text class="rollNameText">{{mvInfo.name + ' - '}} {{mvInfo.artistName}}</text>
                            <text class="rollNameText">{{mvInfo.name + ' - '}} {{mvInfo.artistName}}</text>
                            <text class="rollNameText">{{mvInfo.name + ' - '}} {{mvInfo.artistName}}</text>
                        </view>
                        </view>
                        <view class="rollItem rollLast" style="height: {{RollHeight}}px;">
                        
                        </view>
                    </view>
                    
                    <text class="iconfont icon-aixin"></text>
                    
                </view>
                <view class="sliderCon">
                    <view wx:if="{{!sliderb}}" class="videoTime">
                        <text class="itemTime">{{fmt.formatTime(videoMaxTime)}}</text>
                        <text class="active">/</text>
                        <text>{{fmt.formatTime(newTime)}}</text>
                    </view>
                    <view class="sliderData">
                        <slider 
                            class="slider" 
                            block-size="12" 
                            value="{{sliderValue}}"
                            backgroundColor="#797979"
                            disabled="{{imageShow}}"
                            block-color="{{!sliderb ? '#ffffff':'#6e6e6e'}}"
                            activeColor="{{!sliderb ? '#e8e8e8':'#828282'}}"
                            data-time="{{item.duration}}"
                            bindchanging="bindchanging"
                            bindchange="bindchange"
                        />
                        <view wx:if="{{imageShow}}" class="loadCon">
                            <view class="loadConItem">
                                
                            </view>
                        </view>
                    </view>
                    
                </view>
            </view>
        </swiper-item>
    </block>
</swiper>


